<?php/***	消息存储页面**/class MessageController extends Yaf_Controller_Abstract {	protected $check ;		public function indexAction() {	}		public function postAction() {		if ($this->getRequest()->isPost()) {			$this->check = new Antihack_Check_Login();			$render_login_data = $this->check->checklogin();			if ($render_login_data['login'] == 1) {				$this->getView()->assign("login",1);				$this->getView()->assign("user_id",$render_login_data['user_id']);				$this->getView()->assign("username",$render_login_data['username']);				$this->getView()->assign("user_photo",$render_login_data['user_photo']);			} else {				//echo "not login";				//$this->getView()->assign("login",0);				exit();			}					$receiver = $this->getRequest()->getPost("receiver");			$messagecontent = $this->getRequest()->getPost("messagecontent");						$messagemodel = new MessageModel();			$receiver_info = $messagemodel->get_userinfo($receiver);			//print_r($receiver_info);			$data = array();			$data['message_sender'] = $render_login_data['user_id'];			$data['message_receptor'] = $receiver_info['user_id'];			$data['message_date'] = date("Y-m-d H:i:s");			$data['message_date_gmt'] = date("e");			$data['message_status'] = 0;			$data['message_content'] = htmlspecialchars($messagecontent);			//print_r($data);			$lastid = $messagemodel->insert_message($data);			if ($lastid) {				echo 1;			}		} else {			//echo "not post";			exit();		}	}	}